: >MARK HERE @ 0 , ;

: >RESOLVE DUP HERE @ SWAP - SWAP ! ;

: <MARK HERE @ ;

: <RESOLVE HERE @  -  , ;

: IF POSTPONE 0BRANCH >MARK ; IMMEDIATE
: AHEAD POSTPONE BRANCH >MARK ; IMMEDIATE
: THEN >RESOLVE ; IMMEDIATE

: BEGIN <MARK ; IMMEDIATE
: UNTIL POSTPONE 0BRANCH <RESOLVE ; IMMEDIATE


: test IF 1 . THEN 2 . ;

: test2 10 BEGIN 1 - DUP . DUP 0 = UNTIL DROP ;

DEBUG test
DEBUG test2